<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Plan de classe</title>
  <style>
    body { font-family: sans-serif; margin: 20px; }
    h1 { text-align: center; margin-bottom: 30px; }

    .container { display: flex; gap: 20px; align-items: flex-start; }

    /* Colonne de gauche */
    .left-panel {
      display: flex; flex-direction: column; gap: 10px;
    }
    .lien-box {
      width: 120px; padding: 10px;
      background-color: #87CEEB; border-radius: 5px;
      text-align: center; cursor: pointer;
      user-select: none;
    }
    .lien-box:hover { background-color: #00bfff; }

    /* Grille : 3×5 sous-cases */
    .cases {
      display: grid;
      grid-template-columns: repeat(3,1fr);
      gap: 20px;
    }
    .case-container {
      display: flex; background-color: #87CEEB;
      border-radius: 5px; overflow: hidden;
    }
    .subcase {
      flex: 1; padding: 8px;
      border-right: 1px solid rgba(255,255,255,.7);
      cursor: pointer;
      transition: background-color 0.3s, color 0.3s;
    }
    .subcase:last-child { border-right: none; }
    .subcase.selected {
      background: #006400; color: #fff;
    }

    /* Mode contrôle : fond rouge */
    .controle {
      background-color: #ff4d4d !important;
      color: #fff !important;
    }

    .header {
      display: flex; align-items: center; gap: 6px;
    }
    .toggle { cursor: pointer; }
    .title { font-weight: bold; }

    .options {
      margin-top: 8px; display: none; padding-left: 4px;
    }

    .result {
      flex: 1; padding: 10px;
      border: 1px solid #ccc; border-radius: 5px;
      min-width: 200px;
    }
    #result-list { list-style: none; padding: 0; margin: 0; }
    #result-list li { margin-bottom: 5px; cursor: pointer; }
    li.detail-select { padding-left: 20px; margin-bottom: 10px; }
    li.detail-select label { display: block; cursor: pointer; }
    li.detail { font-style: italic; padding-left: 20px; margin-bottom: 10px; cursor: default; }

    /* Pied de page */
    .footer-container {
      text-align: center;
      margin-top: 30px;
    }
    .footer-box {
      display: inline-block;
      padding: 10px 20px;
      border: 2px solid #000;
      border-radius: 5px;
      font-weight: bold;
    }
  </style>
</head>
<body>

  <h1>Plan de classe</h1>

  <div class="container">
    <!-- Actions gauche -->
    <div class="left-panel">
      <div class="lien-box" id="lien-box">Lien</div>
      <div class="lien-box" id="appel-box">Appel terminé</div>
      <div class="lien-box" id="mode-controle-box">Mode contrôle</div>
      <div id="appel-result"></div>
    </div>

    <!-- Grille de 30 sous-cases -->
    <div class="cases" id="cases"></div>

    <!-- Zone infractions -->
    <div class="result">
      <ul id="result-list"></ul>
    </div>
  </div>

  <div class="footer-container">
    <div class="footer-box">Tableau</div>
  </div>

  <script>
    // Détails possibles par rubrique
    const detailsOptions = {
      "Comportement": [ /* ... */ ],
      "Travail non fait": [ /* ... */ ],
      "Oubli de matériel": [ /* ... */ ]
    };

    // Génération des 30 sous-cases
    const casesContainer = document.getElementById('cases');
    let num = 1;
    for (let row = 0; row < 5; row++) {
      for (let col = 0; col < 3; col++) {
        const cont = document.createElement('div');
        cont.className = 'case-container';
        for (let half = 0; half < 2; half++) {
          const sc = document.createElement('div');
          sc.className = 'subcase';
          sc.dataset.case = num;

          const header = document.createElement('div');
          header.className = 'header';
          const toggle = document.createElement('input');
          toggle.type = 'checkbox'; toggle.className = 'toggle';
          toggle.dataset.case = num;
          const title = document.createElement('span');
          title.className = 'title';
          title.textContent = `Case ${num}`;
          header.append(toggle, title);
          sc.append(header);

          // Options principales
          const opts = document.createElement('div');
          opts.className = 'options';
          ["Comportement","Travail non fait","Oubli de matériel"].forEach(cat => {
            const lbl = document.createElement('label');
            const inp = document.createElement('input');
            inp.type = 'checkbox';
            inp.dataset.case = num;
            inp.value = cat;
            lbl.append(inp, ' ' + cat);
            opts.append(lbl, document.createElement('br'));
          });
          sc.append(opts);

          cont.append(sc);
          num++;
        }
        casesContainer.append(cont);
      }
    }

    // Sélection / infractions (inchangé)
    // …

    // Mode contrôle
    const modeBtn = document.getElementById('mode-controle-box');
    let enControle = false;
    modeBtn.addEventListener('click', () => {
      enControle = !enControle;
      document.querySelectorAll('.subcase').forEach(sc => {
        const titleSpan = sc.querySelector('.title');
        // Gestion du fond rouge
        if (enControle) {
          sc.classList.add('controle');
          // Transformer le titre en lien
          const caseNum = sc.dataset.case;
          const a = document.createElement('a');
          a.href = '#'; // à personnaliser
          a.textContent = `Case ${caseNum}`;
          a.addEventListener('click', e => {
            e.stopPropagation();
            // ici on peut ajouter une action à ce clic si besoin
          });
          titleSpan.replaceWith(a);
        } else {
          sc.classList.remove('controle');
          // Revenir au simple span
          const link = sc.querySelector('a');
          if (link) {
            const span = document.createElement('span');
            span.className = 'title';
            span.textContent = link.textContent;
            link.replaceWith(span);
          }
        }
      });
      // Optionnel : changer visuel du bouton
      modeBtn.textContent = enControle ? 'Quitter contrôle' : 'Mode contrôle';
    });

  </script>
</body>
</html>
